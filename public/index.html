<!DOCTYPE html>
<!-- Authors: Justin Erickson, Richie Burch, Matt Hardin, Nathan Robertson -->
<html>
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PyCrafty</title>

    <link rel="stylesheet" href="stylesheets/style.css">
    <link rel="stylesheet" href="stylesheets/picnic.css">

    <!-- Blockly source code. WARNING: These three files must be above the other files -->
    <script src="javascripts/blockly_compressed.js"></script>
    <script src="javascripts/python_compressed.js"></script>
    <script src="msg/js/en.js"></script>

    <!-- Minecraft block methods -->
    <script src="javascripts/minecraft_blocks/minecraft.js"></script>
    <script src="javascripts/minecraft_blocks/player.js"></script>
    <script src="javascripts/minecraft_blocks/vectorAttributes.js"></script>
    <script src="javascripts/minecraft_blocks/setVecAttrTo.js"></script>
    <script src="javascripts/minecraft_blocks/entity.js"></script>
    <script src="javascripts/minecraft_blocks/mcBlock.js"></script>

    <!-- Google implemented blocks -->
    <script src="javascripts/google_blocks/lists.js"></script>
    <script src="javascripts/google_blocks/logic.js"></script>
    <script src="javascripts/google_blocks/loops.js"></script>
    <script src="javascripts/google_blocks/math.js"></script>
    <script src="javascripts/google_blocks/procedures.js"></script>
    <script src="javascripts/google_blocks/text.js"></script>
    <script src="javascripts/google_blocks/variables.js"></script>
    <script src="javascripts/google_blocks/variables_dynamic.js"></script>



</head>

<body>

<!-- Nav bar source: https://picnicss.com/documentation#nav -->
<nav class="navBar">
    <a href="#" class="brand"><span>PyCrafty</span></a>

    <input id="bmenub" type="checkbox" class="show">
    <label for="bmenub" class="burger pseudo button">menu</label>


    <div class="menu">
        <a href="#" class="pseudo button" id="generateButton" onclick="generateScript()">Create Script</a>
        <a href="#" class="pseudo button" id="exportButton" onclick="saveBlocks()">Save Blocks</a>
        <!-- https://stackoverflow.com/questions/16215771/how-open-select-file-dialog-via-js -->
        <a href="#" class="pseudo button" id="importButton" onclick="document.getElementById('file-input').click()">Load Blocks</a>
        <input id="file-input" type="file" accept="text/xml" name="name" onchange="loadBlocks()"
               style="display: none;"/>
        <a href="#" class="pseudo button" id="createSnapshotButton" onclick="createSnapshot()">Create Snapshot</a>
        <a href="#" class="pseudo button" id="restoreSnapshotButton" onclick="restoreSnapshot()">Restore Snapshot</a>
    </div>

</nav>

<!-- Defines tabs between code and workspace -->
<div id="tabArea" class="tabs two app-tabs">

    <input id="tab-1" type="radio" name="tabgroupA" checked>
    <label class="pseudo button toggle" for="tab-1">Workspace</label>

    <input id="tab-2" type="radio" name="tabgroupA">
    <label class="pseudo button toggle" for="tab-2">Code</label>

    <div class="row">
        <div id="blocklyArea">
            <!-- This is the Div Blockly will render in. size can be adjusted here -->
            <div id="blocklyDiv"></div>
        </div>

        <div>
            <textarea id="codeArea" name="codeArea" style="position:relative; "></textarea>
        </div>
    </div>

</div>


<!--This defines the toolbox to be given to Blockly.  -->
<!--Additional blocks can be added and categorized.   -->
<xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
    <category name="Logic" colour="#5C81A6">
        <block type="controls_if"></block>
        <block type="logic_compare">
            <field name="OP">EQ</field>
        </block>
        <block type="logic_operation">
            <field name="OP">AND</field>
        </block>
        <block type="logic_negate"></block>
        <block type="logic_boolean">
            <field name="BOOL">TRUE</field>
        </block>
        <block type="logic_null"></block>
        <block type="logic_ternary"></block>
    </category>
    <category name="Loops" colour="#5CA65C">
        <block type="controls_repeat_ext">
            <value name="TIMES">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
        </block>
        <block type="controls_whileUntil">
            <field name="MODE">WHILE</field>
        </block>
        <block type="controls_for">
            <field name="VAR" id="NbNqu]bPFzbkqhM0k@Cg" variabletype="">i</field>
            <value name="FROM">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="TO">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
            <value name="BY">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
        </block>
        <block type="controls_forEach">
            <field name="VAR" id="hTX8fmq-z%ewzgmBxZ81" variabletype="">j</field>
        </block>
        <block type="controls_flow_statements">
            <field name="FLOW">BREAK</field>
        </block>
    </category>
    <category name="Math" colour="#5C68A6">
        <block type="math_number">
            <field name="NUM">0</field>
        </block>
        <block type="math_arithmetic">
            <field name="OP">ADD</field>
            <value name="A">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="B">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
        </block>
        <block type="math_single">
            <field name="OP">ROOT</field>
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">9</field>
                </shadow>
            </value>
        </block>
        <block type="math_trig">
            <field name="OP">SIN</field>
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">45</field>
                </shadow>
            </value>
        </block>
        <block type="math_constant">
            <field name="CONSTANT">PI</field>
        </block>
        <block type="math_number_property">
            <mutation divisor_input="false"></mutation>
            <field name="PROPERTY">EVEN</field>
            <value name="NUMBER_TO_CHECK">
                <shadow type="math_number">
                    <field name="NUM">0</field>
                </shadow>
            </value>
        </block>
        <block type="math_round">
            <field name="OP">ROUND</field>
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">3.1</field>
                </shadow>
            </value>
        </block>
        <block type="math_on_list">
            <mutation op="SUM"></mutation>
            <field name="OP">SUM</field>
        </block>
        <block type="math_modulo">
            <value name="DIVIDEND">
                <shadow type="math_number">
                    <field name="NUM">64</field>
                </shadow>
            </value>
            <value name="DIVISOR">
                <shadow type="math_number">
                    <field name="NUM">10</field>
                </shadow>
            </value>
        </block>
        <block type="math_constrain">
            <value name="VALUE">
                <shadow type="math_number">
                    <field name="NUM">50</field>
                </shadow>
            </value>
            <value name="LOW">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="HIGH">
                <shadow type="math_number">
                    <field name="NUM">100</field>
                </shadow>
            </value>
        </block>
        <block type="math_random_int">
            <value name="FROM">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="TO">
                <shadow type="math_number">
                    <field name="NUM">100</field>
                </shadow>
            </value>
        </block>
        <block type="math_random_float"></block>
    </category>
    <category name="Text" colour="#5CA68D">
        <block type="text">
            <field name="TEXT"></field>
        </block>
        <block type="text_join">
            <mutation items="2"></mutation>
        </block>
        <block type="text_append">
            <field name="VAR" id="Wf#^#xGU]L)e!QK{d],h" variabletype="">item</field>
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT"></field>
                </shadow>
            </value>
        </block>
        <block type="text_length">
            <value name="VALUE">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_isEmpty">
            <value name="VALUE">
                <shadow type="text">
                    <field name="TEXT"></field>
                </shadow>
            </value>
        </block>
        <block type="text_indexOf">
            <field name="END">FIRST</field>
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR" id="iKD!ueZ.y:.]R[B]P;X8" variabletype="">text</field>
                </block>
            </value>
            <value name="FIND">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_charAt">
            <mutation at="true"></mutation>
            <field name="WHERE">FROM_START</field>
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR" id="iKD!ueZ.y:.]R[B]P;X8" variabletype="">text</field>
                </block>
            </value>
        </block>
        <block type="text_getSubstring">
            <mutation at1="true" at2="true"></mutation>
            <field name="WHERE1">FROM_START</field>
            <field name="WHERE2">FROM_START</field>
            <value name="STRING">
                <block type="variables_get">
                    <field name="VAR" id="iKD!ueZ.y:.]R[B]P;X8" variabletype="">text</field>
                </block>
            </value>
        </block>
        <block type="text_changeCase">
            <field name="CASE">UPPERCASE</field>
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_trim">
            <field name="MODE">BOTH</field>
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_print">
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
        <block type="text_prompt_ext">
            <mutation type="TEXT"></mutation>
            <field name="TYPE">TEXT</field>
            <value name="TEXT">
                <shadow type="text">
                    <field name="TEXT">abc</field>
                </shadow>
            </value>
        </block>
    </category>
    <category name="Lists" colour="#745CA6">
        <block type="lists_create_with">
            <mutation items="0"></mutation>
        </block>
        <block type="lists_create_with">
            <mutation items="3"></mutation>
        </block>
        <block type="lists_repeat">
            <value name="NUM">
                <shadow type="math_number">
                    <field name="NUM">5</field>
                </shadow>
            </value>
        </block>
        <block type="lists_length"></block>
        <block type="lists_isEmpty"></block>
        <block type="lists_indexOf">
            <field name="END">FIRST</field>
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR" id="iSY:!i3xuq3afcHn#R,%" variabletype="">list</field>
                </block>
            </value>
        </block>
        <block type="lists_getIndex">
            <mutation statement="false" at="true"></mutation>
            <field name="MODE">GET</field>
            <field name="WHERE">FROM_START</field>
            <value name="VALUE">
                <block type="variables_get">
                    <field name="VAR" id="iSY:!i3xuq3afcHn#R,%" variabletype="">list</field>
                </block>
            </value>
        </block>
        <block type="lists_setIndex">
            <mutation at="true"></mutation>
            <field name="MODE">SET</field>
            <field name="WHERE">FROM_START</field>
            <value name="LIST">
                <block type="variables_get">
                    <field name="VAR" id="iSY:!i3xuq3afcHn#R,%" variabletype="">list</field>
                </block>
            </value>
        </block>
        <block type="lists_getSublist">
            <mutation at1="true" at2="true"></mutation>
            <field name="WHERE1">FROM_START</field>
            <field name="WHERE2">FROM_START</field>
            <value name="LIST">
                <block type="variables_get">
                    <field name="VAR" id="iSY:!i3xuq3afcHn#R,%" variabletype="">list</field>
                </block>
            </value>
        </block>
        <block type="lists_split">
            <mutation mode="SPLIT"></mutation>
            <field name="MODE">SPLIT</field>
            <value name="DELIM">
                <shadow type="text">
                    <field name="TEXT">,</field>
                </shadow>
            </value>
        </block>
        <block type="lists_sort">
            <field name="TYPE">NUMERIC</field>
            <field name="DIRECTION">1</field>
        </block>
    </category>
    <category name="Minecraft" colour="#a55b6d">

        <block type="get_block"></block>

        <block type="get_block_with_data"></block>

        <block type="get_height"></block>

        <block type="get_blocks"></block>

        <block type="set_block"></block>

        <block type="set_blocks"></block>

        <block type="post_to_chat"></block>

        <block type="get_player_entity_ids"></block>

        <block type="get_player_id"></block>

        <category name="Player" colour="#a55b6d">

            <block type="player_set_position">

            </block>

            <block type="player_set_tile_position">

            </block>


            <block type="player_get_position"></block>

            <block type="player_get_tile_position"></block>

            <block type="player_get_pitch"></block>

            <block type="player_get_direction"></block>

            <block type="getRotation"></block>
        </category>


        <category name="Vectors" colour="#a55b6d">

            <block type="set_vector_attribute_to"></block>
            <block type="vector_x_attribute"></block>
            <block type="vector_y_attribute"></block>
            <block type="vector_z_attribute"></block>

        </category>

        <category name="Entity" colour="#a55b6d">

            <block type="entity_getPos">
                <field name="ENTITY_ID"></field>
            </block>

            <block type="entity_setPos"></block>
            <block type="entity_getTilePos"></block>
            <block type="entity_setTilePos"></block>
            <block type="entity_getRotation"></block>
            <block type="entity_getPitch"></block>
            <block type="entity_getDirection"></block>
        </category>

        <category name="Minecraft Block" colour="#A65C81">
            <block type="mcblock_setBlock"></block>
            <block type="mcblock_setType"></block>
            <block type="mcblock_setData"></block>
        </category>

    </category> <!-- End of Minecraft Category -->

    <sep></sep>
    <category name="Variables" colour="#A65C81" custom="VARIABLE_DYNAMIC"></category>

    <category name="Functions" colour="#A65C81">
        <block type="procedures_defreturn">
            <field name="NAME" colour="#A65C81"></field>
        </block>

        <block type="procedures_defnoreturn" colour="#A65C81"></block>

        <block type="procedures_ifreturn" colour="#A65C81"></block>
    </category>
</xml>


<!-- Misc Libraries -->
<script src="javascripts/jquery.js"></script>
<!-- TODO: Install bootstrap so network connection is not necessary -->
<script src="javascripts/bootstrap-4.3.1-dist/css/bootstrap.css"></script>
<script src="javascripts/bootstrap-4.3.1-dist/js/bootstrap.bundle.js"></script>
<script src="javascripts/notify.js"></script>

<!-- Scripts to control Blockly workspace and toolbar -->
<script src="javascripts/workspace.js"></script>
<script src="javascripts/toolBar.js"></script>


</body>
</html>
